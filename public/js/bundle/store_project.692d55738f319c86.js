"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3914],{52197:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var r=a(74865),s=a.n(r);const o={metaInfo:{title:"Create Project"},data:function(){return{isLoading:!0,SubmitProcessing:!1,clients:[],companies:[],employees:[],project:{title:"",description:"",client_id:"",company_id:"",assigned_to:[],start_date:(new Date).toISOString().slice(0,10),end_date:"",status:""}}},methods:{Submit_Project:function(){var e=this;this.$refs.ref_create_project.validate().then((function(t){t?e.Create_Project():e.makeToast("danger",e.$t("Please_fill_the_form_correctly"),e.$t("Failed"))}))},makeToast:function(e,t,a){this.$root.$bvToast.toast(t,{title:a,variant:e,solid:!0})},getValidationState:function(e){var t=e.dirty,a=e.validated,r=e.valid;return t||a?void 0===r?null:r:null},Create_Project:function(){var e=this;this.SubmitProcessing=!0;var t=this;s().start(),s().set(.1),axios.post("projects",{title:t.project.title,description:t.project.description,company_id:t.project.company_id,client:t.project.client_id,assigned_to:t.project.assigned_to,start_date:t.project.start_date,end_date:t.project.end_date,status:t.project.status}).then((function(t){s().done(),e.SubmitProcessing=!1,e.$router.push({name:"index_project"}),e.makeToast("success",e.$t("Successfully_Created"),e.$t("Success"))})).catch((function(t){s().done(),e.makeToast("danger",e.$t("InvalidData"),e.$t("Failed")),e.SubmitProcessing=!1}))},Selected_Client:function(e){null===e&&(this.project.client_id="")},Selected_Team:function(e){null===e&&(this.project.assigned_to=[])},Selected_Status:function(e){null===e&&(this.project.status="")},Selected_Company:function(e){null===e&&(this.project.company_id=""),this.employees=[],this.project.assigned_to=[],this.Get_employees_by_company(e)},Get_employees_by_company:function(e){var t=this;axios.get("/Get_employees_by_company?id="+e).then((function(e){var a=e.data;return t.employees=a}))},GetElements:function(){var e=this;axios.get("projects/create").then((function(t){e.clients=t.data.clients,e.companies=t.data.companies,e.isLoading=!1})).catch((function(t){setTimeout((function(){e.isLoading=!1}),500)}))}},created:function(){this.GetElements()}};const n=(0,a(51900).Z)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:"Create Project",folder:"Projects"}}),e._v(" "),e.isLoading?t("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e._e(),e._v(" "),e.isLoading?e._e():t("validation-observer",{ref:"ref_create_project"},[t("b-form",{on:{submit:function(t){return t.preventDefault(),e.Submit_Project.apply(null,arguments)}}},[t("b-row",[t("b-col",{attrs:{lg:"12",md:"12",sm:"12"}},[t("b-card",[t("b-row",[t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Title",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("b-form-group",{attrs:{label:"Title *"}},[t("b-form-input",{attrs:{placeholder:"Enter Project Title",state:e.getValidationState(a),"aria-describedby":"title-feedback",label:"Project Title"},model:{value:e.project.title,callback:function(t){e.$set(e.project,"title",t)},expression:"project.title"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"title-feedback"}},[e._v(e._s(a.errors[0]))])],1)]}}],null,!1,183132669)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"start_date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("b-form-group",{attrs:{label:"Start date *"}},[t("b-form-input",{attrs:{state:e.getValidationState(a),"aria-describedby":"start_date-feedback",type:"date"},model:{value:e.project.start_date,callback:function(t){e.$set(e.project,"start_date",t)},expression:"project.start_date"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"start_date-feedback"}},[e._v(e._s(a.errors[0]))])],1)]}}],null,!1,2798413525)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"end_date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){return[t("b-form-group",{attrs:{label:"Finish date *"}},[t("b-form-input",{attrs:{state:e.getValidationState(a),"aria-describedby":"end_date-feedback",type:"date"},model:{value:e.project.end_date,callback:function(t){e.$set(e.project,"end_date",t)},expression:"project.end_date"}}),e._v(" "),t("b-form-invalid-feedback",{attrs:{id:"end_date-feedback"}},[e._v(e._s(a.errors[0]))])],1)]}}],null,!1,419153577)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Client"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("b-form-group",{attrs:{label:"Client"}},[t("v-select",{class:{"is-invalid":!!s.length},attrs:{state:!s[0]&&(!!r||null),reduce:function(e){return e.value},placeholder:"Choose Client",options:e.clients.map((function(e){return{label:e.name,value:e.id}}))},on:{input:e.Selected_Client},model:{value:e.project.client_id,callback:function(t){e.$set(e.project,"client_id",t)},expression:"project.client_id"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(s[0]))])],1)}}],null,!1,3228754306)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Company"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("b-form-group",{attrs:{label:"Company"}},[t("v-select",{class:{"is-invalid":!!s.length},attrs:{state:!s[0]&&(!!r||null),reduce:function(e){return e.value},placeholder:"Choose Company",options:e.companies.map((function(e){return{label:e.name,value:e.id}}))},on:{input:e.Selected_Company},model:{value:e.project.company_id,callback:function(t){e.$set(e.project,"company_id",t)},expression:"project.company_id"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(s[0]))])],1)}}],null,!1,4270649474)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Assigned_Employees"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("b-form-group",{attrs:{label:"Assigned Employees"}},[t("v-select",{class:{"is-invalid":!!s.length},attrs:{state:!s[0]&&(!!r||null),reduce:function(e){return e.value},placeholder:"Choose Team",options:e.employees.map((function(e){return{label:e.username,value:e.id}}))},on:{input:e.Selected_Team},model:{value:e.project.assigned_to,callback:function(t){e.$set(e.project,"assigned_to",t)},expression:"project.assigned_to"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(s[0]))])],1)}}],null,!1,3633704244)})],1),e._v(" "),t("b-col",{attrs:{lg:"4",md:"6",sm:"12"}},[t("validation-provider",{attrs:{name:"Status",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("b-form-group",{attrs:{label:e.$t("Status")+" *"}},[t("v-select",{class:{"is-invalid":!!s.length},attrs:{state:!s[0]&&(!!r||null),reduce:function(e){return e.value},placeholder:e.$t("Choose_Status"),options:[{label:"Not Started",value:"not_started"},{label:"In Progress",value:"progress"},{label:"Cancelled",value:"cancelled"},{label:"On Hold",value:"hold"},{label:"Completed",value:"completed"}]},on:{input:e.Selected_Status},model:{value:e.project.status,callback:function(t){e.$set(e.project,"status",t)},expression:"project.status"}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(s[0]))])],1)}}],null,!1,2872707373)})],1),e._v(" "),t("b-col",{attrs:{lg:"8",md:"8",sm:"12"}},[t("validation-provider",{attrs:{name:"Description"},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.valid,s=a.errors;return t("b-form-group",{attrs:{label:e.$t("Details")}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.project.description,expression:"project.description"}],staticClass:"form-control",class:{"is-invalid":!!s.length},attrs:{state:!s[0]&&(!!r||null),rows:"4",placeholder:e.$t("Afewwords")},domProps:{value:e.project.description},on:{input:function(t){t.target.composing||e.$set(e.project,"description",t.target.value)}}}),e._v(" "),t("b-form-invalid-feedback",[e._v(e._s(s[0]))])],1)}}],null,!1,1486681098)})],1),e._v(" "),t("b-col",{attrs:{md:"12"}},[t("b-form-group",[t("b-button",{attrs:{variant:"primary",type:"submit",disabled:e.SubmitProcessing}},[t("i",{staticClass:"i-Yes me-2 font-weight-bold"}),e._v(" "+e._s(e.$t("submit")))]),e._v(" "),e.SubmitProcessing?e._m(0):e._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"typo__p"},[e("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);